#:kivy 1.10.0
#: import Difficulty difficulty.Difficulty
#: import PlayerMode playermode.PlayerMode
# note: file name lacks underscores due to kivy's reliance on file naming convention

<TicTacToeScreenManager>:
    id: screen_manager

    screen_player_select: screen_player_select
    screen_difficulty_select: screen_difficulty_select
    screen_game:  screen_game

    ScreenPlayerSelect:
        id: screen_player_select
        name: "Player Select"
        manager: screen_manager

    ScreenDifficultySelect:
        id: screen_difficulty_select
        name: "Difficulty Select"
        manager: screen_manager

    ScreenGame:
        id: screen_game
        name: "Tic Tac Toe"
        manager: screen_manager

<ScreenPlayerSelect>:
    BoxLayout:
        size: self.parent.size  # important!
        pos: self.parent.pos  # important!
        orientation: 'vertical'
        padding: 200
        spacing: 20
        Button:
            text: "One Player"
            on_release: root.manager.screen_game.mode = PlayerMode.ONE
            on_release: root.manager.current = 'Difficulty Select'
        Button:
            text: "Two Player"
            on_release: root.manager.screen_game.mode = PlayerMode.TWO
            on_release: root.manager.current = 'Tic Tac Toe'

<ScreenDifficultySelect>:
    BoxLayout:
        size: self.parent.size  # important!
        pos: self.parent.pos  # important!
        orientation: 'vertical'
        padding: 200
        spacing: 20
        Button:
            text: "Easy"
            on_release: root.manager.screen_game.difficulty = Difficulty.EASY
            on_release: root.manager.current = 'Tic Tac Toe'
        Button:
            text: "Normal"
            on_release: root.manager.screen_game.difficulty = Difficulty.NORMAL
            on_release: root.manager.current = 'Tic Tac Toe'
        Button:
            text: "Hard"
            on_release: root.manager.screen_game.difficulty = Difficulty.HARD
            on_release: root.manager.current = 'Tic Tac Toe'

<ScreenGame>:
    allowMove: True
    mode: PlayerMode.ONE
    difficult: Difficulty.NORMAL
    GridLayout:
        rows:3
        cols:3
        spacing:10
        padding:10
        size: root.width, root.height

        Button:
            font_size:100
            text: root.state[0]
            disabled: root.is_disabled(root.state[0])
            on_press: root.select_cell(self, 0, 0)
            on_release: root.player_moved()

        Button:
            font_size:100
            text: root.state[1]
            disabled: root.is_disabled(root.state[1])
            on_press: root.select_cell(self, 0, 1)
            on_release: root.player_moved()

        Button:
            font_size:100
            text: root.state[2]
            disabled: root.is_disabled(root.state[2])
            on_press: root.select_cell(self, 0, 2)
            on_release: root.player_moved()

        Button:
            font_size:100
            text: root.state[3]
            disabled: root.is_disabled(root.state[3])
            on_press: root.select_cell(self, 1, 0)
            on_release: root.player_moved()

        Button:
            font_size:100
            text: root.state[4]
            disabled: root.is_disabled(root.state[4])
            on_press: root.select_cell(self, 1, 1)
            on_release: root.player_moved()

        Button:
            font_size:100
            text: root.state[5]
            disabled: root.is_disabled(root.state[5])
            on_press: root.select_cell(self, 1, 2)
            on_release: root.player_moved()

        Button:
            font_size:100
            text: root.state[6]
            disabled: root.is_disabled(root.state[6])
            on_press: root.select_cell(self, 2, 0)
            on_release: root.player_moved()

        Button:
            font_size:100
            text: str(root.state[7])
            disabled: root.is_disabled(root.state[7])
            on_press: root.select_cell(self, 2, 1)
            on_release: root.player_moved()

        Button:
            font_size:100
            text: root.state[8]
            disabled: root.is_disabled(root.state[8])
            on_press: root.select_cell(self, 2, 2)
            on_release: root.player_moved()
